{
  "name": "Moj AI - Intent Recognition Workflow",
  "nodes": [
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "webhook-chat",
        "responseMode": "responseNode",
        "options": {}
      },
      "name": "Webhook - User Input",
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 1,
      "position": [250, 300],
      "webhookId": "moj-ai-chat"
    },
    {
      "parameters": {
        "url": "http://localhost:8000/api/intent/detect",
        "method": "POST",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "text",
              "value": "={{ $json.body.message }}"
            },
            {
              "name": "context",
              "value": "={{ { user_id: $json.body.user_id, session_id: $json.body.session_id } }}"
            }
          ]
        },
        "options": {}
      },
      "name": "Intent Detection API",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 3,
      "position": [450, 300]
    },
    {
      "parameters": {
        "functionCode": "// Ù…Ø¹Ø§Ù„Ø¬Ø© Ù†ØªÙŠØ¬Ø© Ø§Ù„ØªØ¹Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„Ù†ÙŠØ©\nconst intent = $input.item.json.intent;\nconst confidence = $input.item.json.confidence;\nconst platform = $input.item.json.platform;\nconst entities = $input.item.json.entities;\nconst suggestions = $input.item.json.suggestions;\n\n// Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø«Ù‚Ø©\nif (confidence < 0.7) {\n  return {\n    action: 'clarify',\n    message: 'Ø¹Ø°Ø±Ø§Ù‹ØŒ Ù„Ù… Ø£ÙÙ‡Ù… Ø·Ù„Ø¨Ùƒ Ø¨Ø´ÙƒÙ„ ÙˆØ§Ø¶Ø­. Ù‡Ù„ ÙŠÙ…ÙƒÙ†Ùƒ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØµÙŠØ§ØºØ©ØŸ',\n    confidence: confidence,\n    suggestions: suggestions\n  };\n}\n\n// ØªÙˆØ¬ÙŠÙ‡ Ø­Ø³Ø¨ Ø§Ù„Ù†ÙŠØ©\nreturn {\n  intent: intent,\n  confidence: confidence,\n  platform: platform,\n  entities: entities,\n  action: intent,\n  suggestions: suggestions\n};"
      },
      "name": "Process Intent",
      "type": "n8n-nodes-base.function",
      "typeVersion": 1,
      "position": [650, 300]
    },
    {
      "parameters": {
        "rules": {
          "rules": [
            {
              "conditions": {
                "string": [
                  {
                    "value1": "={{ $json.intent }}",
                    "value2": "add_account"
                  }
                ]
              },
              "renameOutput": true,
              "outputKey": "add_account"
            },
            {
              "conditions": {
                "string": [
                  {
                    "value1": "={{ $json.intent }}",
                    "value2": "create_post"
                  }
                ]
              },
              "renameOutput": true,
              "outputKey": "create_post"
            },
            {
              "conditions": {
                "string": [
                  {
                    "value1": "={{ $json.intent }}",
                    "value2": "schedule_post"
                  }
                ]
              },
              "renameOutput": true,
              "outputKey": "schedule_post"
            },
            {
              "conditions": {
                "string": [
                  {
                    "value1": "={{ $json.intent }}",
                    "value2": "get_analytics"
                  }
                ]
              },
              "renameOutput": true,
              "outputKey": "get_analytics"
            },
            {
              "conditions": {
                "string": [
                  {
                    "value1": "={{ $json.intent }}",
                    "value2": "list_accounts"
                  }
                ]
              },
              "renameOutput": true,
              "outputKey": "list_accounts"
            },
            {
              "conditions": {
                "string": [
                  {
                    "value1": "={{ $json.intent }}",
                    "value2": "help"
                  }
                ]
              },
              "renameOutput": true,
              "outputKey": "help"
            }
          ]
        },
        "fallbackOutput": "extra"
      },
      "name": "Route by Intent",
      "type": "n8n-nodes-base.switch",
      "typeVersion": 1,
      "position": [850, 300]
    },
    {
      "parameters": {
        "functionCode": "// Ù…Ø¹Ø§Ù„Ø¬Ø© Ø·Ù„Ø¨ Ø¥Ø¶Ø§ÙØ© Ø­Ø³Ø§Ø¨\nconst platform = $input.item.json.platform;\nconst entities = $input.item.json.entities;\n\nreturn {\n  message: `Ø³Ø£Ø³Ø§Ø¹Ø¯Ùƒ ÙÙŠ Ø¥Ø¶Ø§ÙØ© Ø­Ø³Ø§Ø¨ ${platform || 'Ø¬Ø¯ÙŠØ¯'}`,\n  next_step: 'request_credentials',\n  platform: platform,\n  instructions: [\n    'Ø§Ù„Ø±Ø¬Ø§Ø¡ ØªØ²ÙˆÙŠØ¯ÙŠ Ø¨Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø§Ø¹ØªÙ…Ø§Ø¯',\n    'Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…',\n    'ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø£Ùˆ API Token'\n  ]\n};"
      },
      "name": "Add Account Flow",
      "type": "n8n-nodes-base.function",
      "typeVersion": 1,
      "position": [1050, 100]
    },
    {
      "parameters": {
        "functionCode": "// Ù…Ø¹Ø§Ù„Ø¬Ø© Ø·Ù„Ø¨ Ø¥Ù†Ø´Ø§Ø¡ Ù…Ù†Ø´ÙˆØ±\nconst platform = $input.item.json.platform;\nconst entities = $input.item.json.entities;\nconst content = entities.post_content;\n\nif (!content) {\n  return {\n    message: 'Ù…Ø§ Ù‡Ùˆ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø°ÙŠ ØªØ±ÙŠØ¯ Ù†Ø´Ø±Ù‡ØŸ',\n    next_step: 'request_content',\n    platform: platform\n  };\n}\n\nif (!platform) {\n  return {\n    message: 'Ø¹Ù„Ù‰ Ø£ÙŠ Ù…Ù†ØµØ© ØªØ±ÙŠØ¯ Ø§Ù„Ù†Ø´Ø±ØŸ',\n    next_step: 'request_platform',\n    content: content,\n    options: ['Twitter', 'Instagram', 'Facebook', 'LinkedIn']\n  };\n}\n\nreturn {\n  message: `Ø³Ø£Ù‚ÙˆÙ… Ø¨Ù†Ø´Ø± Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø¹Ù„Ù‰ ${platform}`,\n  next_step: 'confirm_post',\n  platform: platform,\n  content: content,\n  preview: {\n    platform: platform,\n    content: content,\n    status: 'ready_to_post'\n  }\n};"
      },
      "name": "Create Post Flow",
      "type": "n8n-nodes-base.function",
      "typeVersion": 1,
      "position": [1050, 200]
    },
    {
      "parameters": {
        "functionCode": "// Ù…Ø¹Ø§Ù„Ø¬Ø© Ø·Ù„Ø¨ Ø¬Ø¯ÙˆÙ„Ø© Ù…Ù†Ø´ÙˆØ±\nconst platform = $input.item.json.platform;\nconst entities = $input.item.json.entities;\nconst content = entities.post_content;\nconst scheduleTime = entities.schedule_time;\n\nif (!content) {\n  return {\n    message: 'Ù…Ø§ Ù‡Ùˆ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø°ÙŠ ØªØ±ÙŠØ¯ Ø¬Ø¯ÙˆÙ„ØªÙ‡ØŸ',\n    next_step: 'request_content'\n  };\n}\n\nif (!scheduleTime) {\n  return {\n    message: 'Ù…ØªÙ‰ ØªØ±ÙŠØ¯ Ù†Ø´Ø± Ù‡Ø°Ø§ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ØŸ',\n    next_step: 'request_schedule_time',\n    content: content,\n    suggestions: ['ØºØ¯Ø§Ù‹ Ø§Ù„Ø³Ø§Ø¹Ø© 10 ØµØ¨Ø§Ø­Ø§Ù‹', 'Ø¨Ø¹Ø¯ Ø³Ø§Ø¹ØªÙŠÙ†', 'Ø§Ù„Ø£Ø­Ø¯ Ø§Ù„Ù‚Ø§Ø¯Ù…']\n  };\n}\n\nreturn {\n  message: `ØªÙ… Ø¬Ø¯ÙˆÙ„Ø© Ø§Ù„Ù…Ù†Ø´ÙˆØ± Ø¹Ù„Ù‰ ${platform || 'Ø§Ù„Ù…Ù†ØµØ© Ø§Ù„Ù…Ø­Ø¯Ø¯Ø©'}`,\n  next_step: 'schedule_confirmed',\n  platform: platform,\n  content: content,\n  schedule_time: scheduleTime,\n  status: 'scheduled'\n};"
      },
      "name": "Schedule Post Flow",
      "type": "n8n-nodes-base.function",
      "typeVersion": 1,
      "position": [1050, 300]
    },
    {
      "parameters": {
        "functionCode": "// Ù…Ø¹Ø§Ù„Ø¬Ø© Ø·Ù„Ø¨ Ø§Ù„ØªØ­Ù„ÙŠÙ„Ø§Øª\nconst platform = $input.item.json.platform;\n\nreturn {\n  message: `Ø³Ø£Ø¹Ø±Ø¶ Ù„Ùƒ ØªØ­Ù„ÙŠÙ„Ø§Øª Ø­Ø³Ø§Ø¨Ùƒ Ø¹Ù„Ù‰ ${platform || 'Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù†ØµØ§Øª'}`,\n  next_step: 'fetch_analytics',\n  platform: platform,\n  metrics: [\n    'Ø¹Ø¯Ø¯ Ø§Ù„Ù…ØªØ§Ø¨Ø¹ÙŠÙ†',\n    'Ù…Ø¹Ø¯Ù„ Ø§Ù„ØªÙØ§Ø¹Ù„',\n    'Ø£ÙØ¶Ù„ Ø§Ù„Ù…Ù†Ø´ÙˆØ±Ø§Øª',\n    'Ø§Ù„Ù†Ù…Ùˆ Ø§Ù„Ø´Ù‡Ø±ÙŠ'\n  ]\n};"
      },
      "name": "Analytics Flow",
      "type": "n8n-nodes-base.function",
      "typeVersion": 1,
      "position": [1050, 400]
    },
    {
      "parameters": {
        "functionCode": "// Ù…Ø¹Ø§Ù„Ø¬Ø© Ø·Ù„Ø¨ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª\nreturn {\n  message: 'Ù‡Ø°Ù‡ Ù‡ÙŠ Ø­Ø³Ø§Ø¨Ø§ØªÙƒ Ø§Ù„Ù…Ø±ØªØ¨Ø·Ø©:',\n  next_step: 'display_accounts',\n  accounts: [\n    { platform: 'Twitter', username: '@user1', status: 'active' },\n    { platform: 'Instagram', username: '@user2', status: 'active' },\n    { platform: 'Facebook', username: 'User Name', status: 'active' }\n  ]\n};"
      },
      "name": "List Accounts Flow",
      "type": "n8n-nodes-base.function",
      "typeVersion": 1,
      "position": [1050, 500]
    },
    {
      "parameters": {
        "functionCode": "// Ù…Ø¹Ø§Ù„Ø¬Ø© Ø·Ù„Ø¨ Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø©\nconst suggestions = $input.item.json.suggestions;\n\nreturn {\n  message: 'Ù…Ø±Ø­Ø¨Ø§Ù‹! Ø£Ù†Ø§ Ù…ÙˆØ¬ AIØŒ Ù…Ø³Ø§Ø¹Ø¯Ùƒ Ø§Ù„Ø°ÙƒÙŠ Ù„Ø¥Ø¯Ø§Ø±Ø© ÙˆØ³Ø§Ø¦Ù„ Ø§Ù„ØªÙˆØ§ØµÙ„ Ø§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠ.',\n  help_topics: [\n    'ğŸ“± Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª: Ø¥Ø¶Ø§ÙØ©ØŒ Ø­Ø°ÙØŒ Ø¹Ø±Ø¶ Ø­Ø³Ø§Ø¨Ø§ØªÙƒ',\n    'âœï¸ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø­ØªÙˆÙ‰: Ù†Ø´Ø±ØŒ Ø¬Ø¯ÙˆÙ„Ø©ØŒ ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…Ù†Ø´ÙˆØ±Ø§Øª',\n    'ğŸ“Š Ø§Ù„ØªØ­Ù„ÙŠÙ„Ø§Øª: Ø¹Ø±Ø¶ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª ÙˆØ§Ù„ØªÙØ§Ø¹Ù„',\n    'ğŸ¤– Ø§Ù„Ø£ØªÙ…ØªØ©: Ø¬Ø¯ÙˆÙ„Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠØ© ÙˆÙ…Ù‡Ø§Ù… Ù…ØªÙƒØ±Ø±Ø©'\n  ],\n  examples: [\n    'Ø£Ø¶Ù Ø­Ø³Ø§Ø¨ ØªÙˆÙŠØªØ±',\n    'Ø§Ù†Ø´Ø± Ù…Ù†Ø´ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù†Ø³ØªÙ‚Ø±Ø§Ù…',\n    'Ø£Ø±Ù†ÙŠ Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø­Ø³Ø§Ø¨ÙŠ',\n    'Ø¬Ø¯ÙˆÙ„ Ù…Ù†Ø´ÙˆØ± ØºØ¯Ø§Ù‹'\n  ],\n  suggestions: suggestions\n};"
      },
      "name": "Help Flow",
      "type": "n8n-nodes-base.function",
      "typeVersion": 1,
      "position": [1050, 600]
    },
    {
      "parameters": {
        "respondWith": "json",
        "responseBody": "={{ $json }}"
      },
      "name": "Response",
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1,
      "position": [1250, 300]
    }
  ],
  "connections": {
    "Webhook - User Input": {
      "main": [
        [
          {
            "node": "Intent Detection API",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Intent Detection API": {
      "main": [
        [
          {
            "node": "Process Intent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Process Intent": {
      "main": [
        [
          {
            "node": "Route by Intent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Route by Intent": {
      "main": [
        [
          {
            "node": "Add Account Flow",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Create Post Flow",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Schedule Post Flow",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Analytics Flow",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "List Accounts Flow",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Help Flow",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Add Account Flow": {
      "main": [
        [
          {
            "node": "Response",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Create Post Flow": {
      "main": [
        [
          {
            "node": "Response",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Schedule Post Flow": {
      "main": [
        [
          {
            "node": "Response",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Analytics Flow": {
      "main": [
        [
          {
            "node": "Response",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "List Accounts Flow": {
      "main": [
        [
          {
            "node": "Response",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Help Flow": {
      "main": [
        [
          {
            "node": "Response",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  }
}
